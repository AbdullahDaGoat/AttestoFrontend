---
// src/pages/index.astro
const siteTitle = "Attesto - Secure Exam Integrity Without Surveillance";
const siteDescription = "Endpoint monitoring software that stops cheating tools during online exams, corporate assessments, and certification testing while respecting privacy.";
const siteUrl = "https://attesto.ca";

// Import Lucide icons
import { 
  AlertCircle, 
  Shield, 
  Activity, 
  Users, 
  Clock,
  MonitorStop, 
  Mail, 
  Lock,
  Logs,
  Power,
  ScanLine,
  ArrowRight,
  Star,
  Home,
  Settings2,
  FileText,
  CheckCircle,
  MapPin,
  Share2,
  Send,
  Play,
  Unlock,
  ChevronLeft,
  ChevronRight,
  ShieldCheck,
  Hourglass,
  University,
  Plane
} from 'lucide-astro';

import '../styles/global.css'
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{siteTitle}</title>
  <meta name="description" content={siteDescription} />
  
  <!-- SEO -->
  <link rel="canonical" href={siteUrl} />
  <meta name="robots" content="index, follow" />
  <meta name="keywords" content="exam integrity, endpoint monitoring, anti-cheating software, proctoring solution, exam security, academic integrity, corporate assessment security" />
  
  <!-- Open Graph -->
  <meta property="og:title" content={siteTitle} />
  <meta property="og:description" content={siteDescription} />
  <meta property="og:url" content={siteUrl} />
  <meta property="og:type" content="website" />
  <meta property="og:image" content={`${siteUrl}/logo.png`} />
  
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content={siteTitle} />
  <meta name="twitter:description" content={siteDescription} />
  <meta name="twitter:image" content={`${siteUrl}/logo.png`} />
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="/logo.png" />
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet" />
</head>

<body>
  <!-- Animated Background -->
  <div class="fixed inset-0 -z-10 overflow-hidden">
    <div class="absolute inset-0 bg-gradient-to-br from-[#0f1729] via-[#1a1f3a] to-[#0f1729]"></div>
    <div class="blob blob-1"></div>
    <div class="blob blob-2"></div>
    <div class="blob blob-3"></div>
    <div class="grain"></div>
  </div>

  <!-- Desktop Navigation -->
  <nav class="desktop-nav">
    <div class="nav-container">
      <a href="#home" class="logo-group">
        <div class="logo-box">
          <img src="/logo.png" alt="Attesto Logo" class="logo-img" />
        </div>
        <div class="logo-text">
          <span class="logo-title">Attesto</span>
          <span class="logo-subtitle">Exam Security</span>
        </div>
      </a>

      <div class="nav-links">
        <a href="#problem" class="nav-link" data-section="problem">
          <AlertCircle size={18} />
          Problem
        </a>
        <a href="#solution" class="nav-link" data-section="solution">
          <Shield size={18} />
          Solution
        </a>
        <a href="#demo" class="nav-link" data-section="demo">
          <Play size={18} />
          Demo
        </a>
        <a href="#features" class="nav-link" data-section="features">
          <Activity size={18} />
          Features
        </a>
        <a href="#built-for" class="nav-link" data-section="built-for">
          <Users size={18} />
          Built For
        </a>
        <a href="#roadmap" class="nav-link" data-section="roadmap">
          <Clock size={18} />
          Roadmap
        </a>
        <a href="#contact" class="nav-link" data-section="contact">
          <Mail size={18} />
          Contact
        </a>
      </div>

      <a href="#contact" class="btn-primary">
        <Plane size={18} />
        Request Access
      </a>
    </div>
  </nav>

  <!-- Mobile Bottom Nav -->
  <nav class="mobile-nav">
    <div class="mobile-nav-container">
      <a href="#home" class="mobile-nav-btn active" data-section="home">
        <Home size={22} />
      </a>
      <a href="#demo" class="mobile-nav-btn" data-section="demo">
        <Play size={22} />
      </a>
      <a href="#contact" class="mobile-nav-btn mobile-nav-primary">
        <Mail size={24} />
      </a>
      <a href="#roadmap" class="mobile-nav-btn" data-section="roadmap">
        <Clock size={22} />
      </a>
      <a href="#built-for" class="mobile-nav-btn" data-section="built-for">
        <Users size={22} />
      </a>
    </div>
  </nav>

  <!-- Hero Section -->
  <section id="home" class="hero-section">
    <div class="container">
      <div class="hero-badge">
        <Star size={16} />
        Beta V1 - Coming Q4 2025
      </div>
      
      <h1 class="hero-title">
        Secure Exam Integrity<br />
        <span class="gradient-text">Without Surveillance</span>
      </h1>
      
      <div class="hero-subtitle">
        <span>Endpoint monitoring that prevents</span>
        <span class="rotating-word" id="rotatingWord"></span>
        <span>during exams</span>
      </div>
      
      <p class="hero-description">
        Session-based enforcement for universities, corporations, and certification bodies. 
        No webcams. No keystroke logging. Complete privacy.
      </p>

      <div class="hero-cta">
        <a href="#contact" class="btn-primary btn-large">
          <Plane size={20} />
          Request Early Access
        </a>
        <a href="#problem" class="btn-secondary btn-large">
          Learn More
          <ArrowRight size={20} />
        </a>
      </div>

      <div class="trust-indicators">
        <div class="trust-card">
        <span class="icon-flip" aria-hidden="true">
            <Unlock class="icon-unlocked" size={28} />
            <Lock   class="icon-locked"   size={28} />
        </span>
        <div>
            <div class="trust-title">Privacy Focused</div>
            <div class="trust-desc">Ensuring Student's Privacy</div>
        </div>
        </div>

       <div class="trust-card ecg-card">
  <span class="ecg-animate" aria-hidden="true">
    <Activity size={28} class="ecg-icon" />
  </span>
  <div>
    <div class="trust-title">95% Effective</div>
    <div class="trust-desc">Stops Common Tools</div>
  </div>
</div>

      <div class="trust-card clock-card">
  <span class="clock-spin" aria-hidden="true">
    <Clock size={28} />
  </span>
  <div>
    <div class="trust-title">&lt;1s Detection</div>
    <div class="trust-desc">Real-Time Response</div>
  </div>
</div>

      </div>
    </div>
  </section>

  <!-- Problem Section -->
  <!-- Problem Section -->
<section id="problem" class="section">
  <div class="container">
    <div class="problem-card">
      <div class="section-badge">
        <AlertCircle size={18} />
        The Crisis
      </div>
      <h2 class="section-title">AI Cheating Tools Are Winning. Traditional Defenses Are Failing.</h2>
      <p class="section-description">
        In 2025, <strong>88% of students admitted using AI tools</strong> to complete assessments‚Äîwith 
        <strong>20% openly admitting to cheating</strong>. The arsenal? Over <strong>100+ "undetectable" tools</strong> 
        like <strong>Cluely</strong> (70,000 users in 72 hours), <strong>WhisprGPT</strong>, and stealth browser extensions 
        that bypass lockdown browsers, dodge screen sharing, and feed students real-time answers. 
        <strong>Webcam proctoring can't see them. Respondus can't block them.</strong> 
        And they're multiplying every semester.
      </p>
      
      <!-- Updated Stats Grid -->
    <div class="problem-stats">
  <div class="stat-item">
    <div class="stat-number counter" data-target="88" data-suffix="%">0%</div>
    <div class="stat-label">of students use AI on assessments<sup><a href="#fn-1">[1]</a></sup></div>
  </div>
  <div class="stat-item">
    <div class="stat-number counter" data-target="15" data-prefix="$" data-suffix="B">$0</div>
    <div class="stat-label">global contract cheating industry value<sup><a href="#fn-2">[2]</a></sup></div>
  </div>
  <div class="stat-item">
    <div class="stat-number counter" data-target="100" data-suffix="+">0+</div>
    <div class="stat-label">active "undetectable" cheating tools<sup><a href="#fn-3">[3]</a></sup></div>
  </div>
</div>


      <!-- NEW: Tool Spotlight (Optional Visual Hook) -->
      <div class="tool-spotlight">
        <h3 class="spotlight-title">üö® What Your Students Are Using Right Now</h3>
        <div class="tool-grid">
          <div class="tool-card">
            <strong>Cluely</strong>
            <span>Invisible AI overlay. Reads exam screens + audio. 70K users in 3 days.</span>
          </div>
          <div class="tool-card">
            <strong>WhisprGPT</strong>
            <span>Bypasses Respondus/Honorlock. Whispers answers outside monitored browser.</span>
          </div>
          <div class="tool-card">
            <strong>Browser Extensions</strong>
            <span>Embed ChatGPT into any exam page. Activated by hotkey. Invisible to screen capture.</span>
          </div>
          <div class="tool-card">
            <strong>Q&A Platforms</strong>
            <span>Chegg, Course Hero, Brainly. Students post mid-exam, get AI answers in minutes.</span>
          </div>
        </div>
      </div>

      <!-- NEW: Urgency Footer -->
      <div class="problem-footer">
        <p>
          <strong>The bottom line:</strong> Traditional lockdown browsers and webcam proctors 
          can't detect these tools. Universities are spending <strong>$196M annually</strong> 
          just managing violations‚Äîbut the cheating keeps escalating. 
          <span class="highlight">A new approach is overdue.</span>
        </p>
      </div>

      <section class="references" aria-labelledby="refs-title">
  <div class="container">
    <h3 id="refs-title" class="refs-title">References</h3>
    <ol class="refs-list">
      <li id="fn-1">
        HEPI/Kortext. <em>Student Generative AI Survey 2025</em>. 
        <a href="https://www.hepi.ac.uk/reports/student-generative-ai-survey-2025/" target="_blank" rel="noopener">Report</a>.
      </li>
      <li id="fn-2">
        Eaton; Curtis (2025). Global contract cheating ‚âà US$15B; also summarized by Turnitin. 
        <a href="https://www.turnitin.com/products/feedback-studio/originality/contract-cheating" target="_blank" rel="noopener">Turnitin</a>.
      </li>
      <li id="fn-3">
        Coverage of ‚Äúundetectable‚Äù overlay tools (e.g., Cluely).
        <a href="https://techcrunch.com/2025/04/29/startups-launch-products-to-catch-people-using-ai-cheating-app-cluely/" target="_blank" rel="noopener">TechCrunch</a>, 
        <a href="https://www.businessinsider.com/cluely-ai-cheat-job-interviews-columbia-chungin-roy-lee-2025-4" target="_blank" rel="noopener">Business Insider</a>, 
        <a href="https://cluely.com/" target="_blank" rel="noopener">Cluely Site</a>.
      </li>
    </ol>
  </div>
</section>
    </div>
    
  </div>
  
</section>


  <!-- Solution Section -->
  <section id="solution" class="section">
    <div class="container">
      <div class="section-header">
        <div class="section-badge">
          <Shield size={18} />
          How It Works
        </div>
        <h2 class="section-title">Session-Based Endpoint Monitoring</h2>
        <p class="section-subtitle">Only active during exams. No 24/7 surveillance.</p>
      </div>

      <div class="solution-grid">
        <!-- Automatic Activation -->
<div class="solution-card">
  <div class="solution-icon icon-activate" aria-hidden="true">
    <Power size={28} class="icon" />
  </div>
  <h3 class="solution-title">Automatic Activation</h3>
  <p class="solution-desc">Triggers when exam software launches. Seamless student experience.</p>
</div>

<!-- Real-Time Detection -->
<div class="solution-card">
  <div class="solution-icon icon-detect" aria-hidden="true">
    <ScanLine size={28} class="icon" />
    <!-- If ScanLine isn‚Äôt available: <Scan size={28} class="icon" /> -->
  </div>
  <h3 class="solution-title">Real-Time Detection</h3>
  <p class="solution-desc">Sub-second process termination. No unauthorized tools run during exams.</p>
</div>


        <div class="solution-card">
          <div class="solution-icon">
            <FileText size={32} />
          </div>
          <h3 class="solution-title">Complete Audit Trail</h3>
          <p class="solution-desc">Detailed CSV logs for compliance and post-exam review.</p>
        </div>
      </div>

      <!-- Beta V1 Notice -->
      <div class="beta-notice">
        <div class="beta-badge">
          <Star size={18} />
          Current: Beta V1
        </div>
        <h3 class="beta-title">Starting Small, Building Big</h3>
        <p class="beta-desc">
          V1 focuses on <strong>university-managed exam labs</strong> with local logging. 
          We're currently <strong>not</strong> supporting BYOD devices, server-side logging, or LMS integration‚Äîthose are coming in V2 (2026). 
          This is a foundation for something much larger. üöÄ
        </p>
        <a href="#roadmap" class="btn-secondary">
          View V2 Roadmap
          <ArrowRight size={18} />
        </a>
      </div>
    </div>
  </section>

  <!-- Product Demo Carousel -->
  <section id="demo" class="section">
    <div class="container">
      <div class="section-header">
        <div class="section-badge">
          <Play size={18} />
          Product Demo
        </div>
        <h2 class="section-title">See Attesto in Action</h2>
        <p class="section-subtitle">Watch how we enforce exam integrity in real-time</p>
      </div>

      <div class="demo-carousel">
        <button class="carousel-btn carousel-btn-left" id="carouselPrev">
          <ChevronLeft size={28} />
        </button>
        
        <div class="carousel-container">
          <div class="carousel-track" id="carouselTrack">
            <!-- Demo Video Placeholder -->
            <div class="carousel-item">
              <div class="demo-card video-card">
                <div class="video-placeholder">
                  <Play size={64} />
                  <span>Demo Video</span>
                </div>
                <div class="demo-caption">
                  <h4>Full Product Walkthrough</h4>
                  <p>See real-time process detection and termination</p>
                </div>
              </div>
            </div>

            <!-- Screenshot Placeholders -->
            <div class="carousel-item">
              <div class="demo-card">
                <div class="image-placeholder">
                  <Activity size={48} />
                  <span>Dashboard View</span>
                </div>
                <div class="demo-caption">
                  <h4>Admin Control Panel</h4>
                  <p>Manage whitelist and view session logs</p>
                </div>
              </div>
            </div>

            <div class="carousel-item">
              <div class="demo-card">
                <div class="image-placeholder">
                  <Shield size={48} />
                  <span>Active Monitoring</span>
                </div>
                <div class="demo-caption">
                  <h4>Real-Time Protection</h4>
                  <p>Watch unauthorized tools get terminated instantly</p>
                </div>
              </div>
            </div>

            <div class="carousel-item">
              <div class="demo-card">
                <div class="image-placeholder">
                  <Logs size={48} />
                  <span>Audit Logs</span>
                </div>
                <div class="demo-caption">
                  <h4>Comprehensive Reporting</h4>
                  <p>Detailed CSV exports for compliance review</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <button class="carousel-btn carousel-btn-right" id="carouselNext">
          <ChevronRight size={28} />
        </button>
      </div>

      <div class="carousel-dots" id="carouselDots"></div>
    </div>
  </section>

  <!-- Features Section -->
  <section id="features" class="section">
    <div class="container">
      <div class="section-header">
        <div class="section-badge">
          <Activity size={18} />
          Core Features
        </div>
        <h2 class="section-title">Powerful, Privacy-First Protection</h2>
      </div>

      <div class="features-grid">
        <div class="feature-card">
          <div class="feature-icon">
            <MonitorStop size={28} />
          </div>
          <h3 class="feature-title">Real-time Monitoring</h3>
          <p class="feature-desc">Sub-second process detection and termination</p>
        </div>

        <div class="feature-card">
          <div class="feature-icon">
            <Settings2 size={28} />
          </div>
          <h3 class="feature-title">Dynamic Whitelist</h3>
          <p class="feature-desc">Configurable permitted applications via admin UI</p>
        </div>

        <div class="feature-card">
          <div class="feature-icon">
            <Home size={28} />
          </div>
          <h3 class="feature-title">Service-Level Deployment</h3>
          <p class="feature-desc">Automatic recovery and tamper resistance</p>
        </div>

        <div class="feature-card">
          <div class="feature-icon">
            <Shield size={28} />
          </div>
          <h3 class="feature-title">Windows Native</h3>
          <p class="feature-desc">Bundled .NET 8 runtime, ~70MB installer</p>
        </div>

        <div class="feature-card">
          <div class="feature-icon">
            <Logs size={28} />
          </div>
          <h3 class="feature-title">Comprehensive Logging</h3>
          <p class="feature-desc">Detailed CSV audit trails for compliance</p>
        </div>

        <div class="feature-card">
          <div class="feature-icon">
            <CheckCircle size={28} />
          </div>
          <h3 class="feature-title">Platform Compatible</h3>
          <p class="feature-desc">Works with Respondus, ExamSoft, ProctorU, Examity, Amazon Chime and More!!</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Built For Section -->
  <section id="built-for" class="section">
    <div class="container">
      <div class="section-header">
        <div class="section-badge">
          <Users size={18} />
          Built For
        </div>
        <h2 class="section-title">Who Benefits from Attesto</h2>
      </div>

      <div class="built-for-grid">
        <div class="built-for-card">
          <div class="built-for-icon">
            <University size={36} />
          </div>
          <h3 class="built-for-title">University Exam Labs</h3>
          <p class="built-for-desc">Computer science departments, testing centers, and certification facilities requiring managed device security.</p>
        </div>

        <div class="built-for-card">
          <div class="built-for-icon">
            <Users size={36} />
          </div>
          <h3 class="built-for-title">Corporate Assessment</h3>
          <p class="built-for-desc">Technical interviews, certification exams, and skills testing for employee evaluation and compliance.</p>
        </div>

        <div class="built-for-card">
          <div class="built-for-icon">
            <ShieldCheck size={36} />
          </div>
          <h3 class="built-for-title">Certification Bodies</h3>
          <p class="built-for-desc">Professional licensing exams, standardized testing, and high-stakes assessment integrity.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Roadmap Section -->
  <section id="roadmap" class="section">
    <div class="container">
      <div class="section-header">
        <div class="section-badge">
          <Clock size={18} />
          Future Vision
        </div>
        <h2 class="section-title">Product Roadmap</h2>
        <p class="section-subtitle">V2 Coming 2026 - BYOD Support & Advanced Features</p>
      </div>

      <div class="roadmap-grid">
        <div class="roadmap-card">
          <div class="roadmap-quarter">Q1 2026</div>
          <h3 class="roadmap-title">Server Infrastructure</h3>
          <ul class="roadmap-list">
            <li>Server-side logging</li>
            <li>Cloud storage</li>
            <li>Analytics / Admin dashboard</li>
          </ul>
        </div>

        <div class="roadmap-card">
          <div class="roadmap-quarter">Q2 2026</div>
          <h3 class="roadmap-title">BYOD Foundation</h3>
          <ul class="roadmap-list">
            <li>Pre-exam system check</li>
            <li>Heartbeat monitoring</li>
            <li>Identity verification</li>
          </ul>
        </div>

        <div class="roadmap-card">
          <div class="roadmap-quarter">Q3 2026</div>
          <h3 class="roadmap-title">System Integrity</h3>
          <ul class="roadmap-list">
            <li>Proctoring partnerships</li>
            <li>Enhanced VM detection</li>
            <li>DLL Injection Protection</li>
            <li>SSO Integration</li>
          </ul>
        </div>

        <div class="roadmap-card">
          <div class="roadmap-quarter">Q4 2026</div>
          <h3 class="roadmap-title">Platform Integration</h3>
          <ul class="roadmap-list">
            <li>LMS plugins</li>
            <li>RESTful API</li>
            <li>Multi-tenant architecture</li>
            <li>And More (this is not exhaustive)</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA Section with 3D Overlap -->
  <section class="cta-section">
    <div class="container">
      <div class="cta-overlap-container">
        <div class="cta-circle cta-circle-1"></div>
        <div class="cta-circle cta-circle-2"></div>
        <div class="cta-circle cta-circle-3"></div>
        <div class="cta-content">
          <h2 class="cta-title">Ready to <span class="gradient-text">secure</span> your exams?</h2>
          <p class="cta-description">Join the early access program for Fall 2025 deployment. Limited beta slots available.</p>
          <div class="cta-buttons">
            <a href="#contact" class="btn-primary btn-large">
              <Plane size={20} />
              Request Early Access
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Contact Section -->
  <section id="contact" class="section">
    <div class="container">
      <div class="section-header">
        <div class="section-badge">
          <Mail size={18} />
          Get in Touch
        </div>
        <h2 class="section-title">Request Early Access</h2>
        <p class="section-subtitle">Limited beta deployment slots for Fall 2025 exam season</p>
      </div>

      <div class="contact-container">
        <!-- Envelope Form -->
        <div class="envelope-card">
          <div class="envelope-flap"></div>
          <form id="contactForm" class="contact-form">
            <div class="form-row">
              <div class="form-group">
                <label for="name">Full Name *</label>
                <input type="text" id="name" name="name" required />
              </div>
              <div class="form-group">
                <label for="email">Email *</label>
                <input type="email" id="email" name="email" required />
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="organization">Organization *</label>
                <input type="text" id="organization" name="organization" required />
              </div>
              <div class="form-group">
                <label for="role">Role *</label>
                <select id="role" name="role" required>
                <option value="" selected disabled hidden>Select your role</option>
                  <option value="university">University Administrator</option>
                  <option value="corporate">Corporate HR/Training</option>
                  <option value="certification">Certification Body</option>
                  <option value="other">Other</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label for="message">Tell us about your needs</label>
              <textarea id="message" name="message" rows="4"></textarea>
            </div>

            <button type="submit" class="btn-primary btn-full">
              <Send size={20} />
              Send Request
            </button>
          </form>
        </div>

        <!-- Contact Info -->
        <div class="contact-info">
          <div class="info-card">
            <Mail size={24} />
            <div>
              <div class="info-label">Email</div>
              <div class="info-value">contact@attesto.ca</div>
            </div>
          </div>

          <div class="info-card">
            <MapPin size={24} />
            <div>
              <div class="info-label">Location</div>
              <div class="info-value">Canada</div>
            </div>
          </div>

          <div class="info-card">
            <Hourglass size={24} />
            <div>
              <div class="info-label">Response Time</div>
              <div class="info-value">Within 24 hours</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-brand">
          <div class="logo-group">
            <div class="logo-box">
              <img src="/logo.png" alt="Attesto Logo" class="logo-img" />
            </div>
            <div class="logo-text">
              <span class="logo-title">Attesto</span>
              <span class="logo-subtitle">Exam Security</span>
            </div>
          </div>
          <p class="footer-description">
            Endpoint monitoring software that stops cheating tools during exams while respecting student privacy.
          </p>
          <button id="shareButton" class="share-button">
            <Share2 size={18} />
            Share Attesto
          </button>
        </div>

        <div class="footer-links">
          <div class="footer-column">
            <h4 class="footer-column-title">Product</h4>
            <a href="#features" class="footer-link">Features</a>
            <a href="#built-for" class="footer-link">Built For</a>
            <a href="#roadmap" class="footer-link">Roadmap</a>
            <a href="#contact" class="footer-link">Request Access</a>
          </div>

          <div class="footer-column">
            <h4 class="footer-column-title">Company</h4>
            <a href="#problem" class="footer-link">Why Attesto</a>
            <a href="#solution" class="footer-link">How It Works</a>
            <a href="#contact" class="footer-link">Contact</a>
          </div>

          <div class="footer-column">
            <h4 class="footer-column-title">Legal</h4>
            <a href="#" class="footer-link">Privacy Policy</a>
            <a href="#" class="footer-link">Terms of Service</a>
            <a href="#" class="footer-link">Security</a>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <script defer>
(() => {
  'use strict';

  /* ========= Rotating words ========= */
  const words = [
    'cheating tools',
    'academic dishonesty',
    'unauthorized software',
    'exam violations',
    'overlay exploits',
    'AI assistance tools'
  ];
  let currentWordIndex = 0;
  const rotatingWordEl = document.getElementById('rotatingWord');

  function rotateWord() {
    if (!rotatingWordEl) return;
    rotatingWordEl.style.opacity = '0';
    rotatingWordEl.style.transform = 'translateY(-10px)';
    setTimeout(() => {
      currentWordIndex = (currentWordIndex + 1) % words.length;
      rotatingWordEl.textContent = words[currentWordIndex];
      rotatingWordEl.style.opacity = '1';
      rotatingWordEl.style.transform = 'translateY(0)';
    }, 300);
  }

  /* ========= Smooth in-page anchors ========= */
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', e => {
      const href = anchor.getAttribute('href');
      if (!href) return;
      const target = document.querySelector(href);
      if (!target) return;
      e.preventDefault();
      target.scrollIntoView({ behavior: 'smooth', block: 'start' });
    });
  });

  /* ========= Nav hide/show + active section (merged handler) ========= */
  const desktopNav = document.querySelector('.desktop-nav');
  const mobileNav  = document.querySelector('.mobile-nav');
  const navLinks   = document.querySelectorAll('.nav-link');
  const mobileBtns = document.querySelectorAll('.mobile-nav-btn');
  const sections   = Array.from(document.querySelectorAll('section[id]'));

  let lastY = window.scrollY;
  let lastActive = '';
  let ticking = false;
  let lastKnownY = lastY;

  function onScroll() {
    lastKnownY = window.scrollY;
    if (!ticking) {
      requestAnimationFrame(updateOnScroll);
      ticking = true;
    }
  }

    /* ========= Counter dials ========= */
  function animateCounter(el, duration = 1200) {
    const target = Number(el.getAttribute('data-target') || 0);
    const prefix = el.getAttribute('data-prefix') || '';
    const suffix = el.getAttribute('data-suffix') || '';
    const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    if (prefersReduced || duration <= 0) {
      el.textContent = `${prefix}${target}${suffix}`;
      return;
    }

    let start = null;
    const startVal = 0;

    function step(ts) {
      if (!start) start = ts;
      const p = Math.min((ts - start) / duration, 1);
      // easeOutCubic
      const eased = 1 - Math.pow(1 - p, 3);
      const val = Math.floor(startVal + (target - startVal) * eased);
      el.textContent = `${prefix}${val}${suffix}`;
      if (p < 1) requestAnimationFrame(step);
    }
    requestAnimationFrame(step);
  }

  // Trigger when the stats block first enters the viewport
  const counters = document.querySelectorAll('.counter');
  if (counters.length) {
    const obs = new IntersectionObserver((entries, observer) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          animateCounter(entry.target, 1400);
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.4 });

    counters.forEach(el => obs.observe(el));
  }


  function updateOnScroll() {
    const y = lastKnownY;
    const down = y > lastY;
    const beyond = y > 100;

    // Hide/show nav with .is-hidden (no Tailwind .hidden collision)
    if (desktopNav && mobileNav) {
      if (down && beyond) {
        desktopNav.classList.add('is-hidden');
        mobileNav.classList.add('is-hidden');
      } else {
        desktopNav.classList.remove('is-hidden');
        mobileNav.classList.remove('is-hidden');
      }
    }

    // Active section highlighting
    const markY = y + window.innerHeight * 0.3;
    let activeId = lastActive;

    for (let i = 0; i < sections.length; i++) {
      const sec = sections[i];
      const top = sec.offsetTop;
      const bottom = top + sec.offsetHeight;
      if (markY >= top && markY <= bottom) {
        activeId = sec.getAttribute('id') || '';
        break;
      }
    }

    if (activeId && activeId !== lastActive) {
      navLinks.forEach(l =>
        l.classList.toggle('active', l.getAttribute('data-section') === activeId)
      );
      mobileBtns.forEach(b =>
        b.classList.toggle('active', b.getAttribute('data-section') === activeId)
      );
      lastActive = activeId;
    }

    lastY = y;
    ticking = false;
  }

  window.addEventListener('scroll', onScroll, { passive: true });

  /* ========= Carousel ========= */
  const track = document.getElementById('carouselTrack');
  const prevBtn = document.getElementById('carouselPrev');
  const nextBtn = document.getElementById('carouselNext');
  const dotsContainer = document.getElementById('carouselDots');
  let currentIndex = 0;
  const totalItems = track ? track.children.length : 0;

  function updateCarousel() {
    if (!track) return;
    track.style.transform = `translateX(-${currentIndex * 100}%)`;
    const dots = dotsContainer ? dotsContainer.querySelectorAll('.carousel-dot') : [];
    dots.forEach((dot, i) => {
      dot.classList.toggle('active', i === currentIndex);
    });
  }

  function goToSlide(index) {
    currentIndex = (index + totalItems) % totalItems;
    updateCarousel();
  }

  if (dotsContainer && totalItems > 0) {
    for (let i = 0; i < totalItems; i++) {
      const dot = document.createElement('button');
      dot.classList.add('carousel-dot');
      if (i === 0) dot.classList.add('active');
      dot.addEventListener('click', () => goToSlide(i));
      dotsContainer.appendChild(dot);
    }
  }

  prevBtn?.addEventListener('click', () => goToSlide(currentIndex - 1));
  nextBtn?.addEventListener('click', () => goToSlide(currentIndex + 1));

  // Touch swipe
  let touchStartX = 0;
  let touchEndX = 0;
  track?.addEventListener('touchstart', e => {
    touchStartX = e.changedTouches[0].screenX;
  }, { passive: true });
  track?.addEventListener('touchend', e => {
    touchEndX = e.changedTouches[0].screenX;
    const dx = touchStartX - touchEndX;
    if (dx > 50) goToSlide(currentIndex + 1);
    if (dx < -50) goToSlide(currentIndex - 1);
  }, { passive: true });

  /* ========= Contact form ========= */
  const contactForm = document.getElementById('contactForm');
  contactForm?.addEventListener('submit', async e => {
    e.preventDefault();
    if (!(contactForm instanceof HTMLFormElement)) return;

    const formData = new FormData(contactForm);
    const data = Object.fromEntries(formData);

    try {
      console.log('Form data:', data);
      alert("Thank you! We'll be in touch soon.");
      contactForm.reset();
    } catch (error) {
      console.error('Form submission error:', error);
      alert('Something went wrong. Please try again.');
    }
  });

  /* ========= Share button ========= */
  const shareButton = document.getElementById('shareButton');
  shareButton?.addEventListener('click', async () => {
    const shareData = {
      title: 'Attesto - Secure Exam Integrity',
      text: "Endpoint monitoring software that stops cheating tools during exams while respecting privacy.",
      url: window.location.href
    };
    try {
      if (navigator.share) {
        await navigator.share(shareData);
      } else {
        await navigator.clipboard.writeText(`${shareData.title}\n${shareData.text}\n${shareData.url}`);
        alert('Link copied to clipboard!');
      }
    } catch (err) {
      console.error('Error sharing:', err);
    }
  });

  /* ========= Init on load ========= */
  document.addEventListener('DOMContentLoaded', () => {
    // Set initial rotating word
    if (rotatingWordEl) {
      rotatingWordEl.textContent = words[0];
      rotatingWordEl.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
      setInterval(rotateWord, 3000);
    }
    // Kick nav state once layout is ready
    updateOnScroll();
    setTimeout(updateOnScroll, 100);
  });
})();
</script>

</body>
</html>